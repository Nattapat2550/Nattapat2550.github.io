<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ดอกกุหลาบออร์แกนิก</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #111;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }
        #rose {
            width: 320px;
            height: 320px;
            position: relative;
        }
        .pixel {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            box-shadow: 
                0 0 3px rgba(0,0,0,0.8),
                inset 0 0 5px rgba(255,255,255,0.3);
            transition: transform 0.3s, opacity 0.5s;
            transform: scale(0);
            opacity: 0;
        }
    </style>
</head>
<body>
    <div id="rose"></div>

    <script>
        // สร้างดอกกุหลาบแบบออร์แกนิก
        const container = document.getElementById('rose');
        const size = 32;
        const pixelSize = 10;
        
        // สีดอกกุหลาบแบบธรรมชาติ
        const colors = [
            '#000000', // พื้นหลัง
            '#FFD1DC', // ชมพูอ่อน
            '#FF9EB5', // ชมพูกลาง
            '#FF6B8B', // ชมพูเข้ม
            '#FF1493', // ชมพูแดง
            '#C2185B', // ชมพูไวน์
            '#8B0000', // ชมพูเข้มมาก
            '#2E8B57', // เขียวใบ
            '#FFD700'  // เกสร
        ];

        // สร้างโครงสร้างดอกกุหลาบแบบออร์แกนิก
        function createOrganicRose() {
            const centerX = size/2;
            const centerY = size/2;
            const rose = [];
            
            // สร้างอาร์เรย์ 2D
            for(let y=0; y<size; y++) {
                rose[y] = [];
                for(let x=0; x<size; x++) {
                    rose[y][x] = 0; // เริ่มด้วยพื้นหลัง
                }
            }
            
            // เพิ่มกลีบดอกแบบออร์แกนิก
            addPetal(rose, centerX, centerY, 12, 14, 4, 1);
            addPetal(rose, centerX, centerY, 10, 12, 3, 2);
            addPetal(rose, centerX, centerY, 8, 10, 2, 3);
            addPetal(rose, centerX, centerY, 6, 8, 1, 4);
            
            // เพิ่มเกสรดอกไม้
            addStamen(rose, centerX, centerY, 4, 8);
            
            // เพิ่มใบ
            addLeaf(rose, centerX+8, centerY+10, 5, 9);
            addLeaf(rose, centerX-8, centerY+10, 5, 9);
            
            return rose;
        }
        
        // สร้างกลีบดอก
        function addPetal(rose, cx, cy, innerR, outerR, colorMin, colorMax) {
            for(let y=0; y<size; y++) {
                for(let x=0; x<size; x++) {
                    const dx = x - cx;
                    const dy = y - cy;
                    const dist = Math.sqrt(dx*dx + dy*dy);
                    
                    if(dist >= innerR && dist <= outerR) {
                        const angle = Math.atan2(dy, dx);
                        const ripple = Math.sin(angle * 5) * 2;
                        
                        if(dist <= outerR + ripple) {
                            const colorVal = Math.floor(
                                colorMin + (colorMax-colorMin) * 
                                (1 - (dist-innerR)/(outerR-innerR))
                            );
                            rose[y][x] = colorVal;
                        }
                    }
                }
            }
        }
        
        // สร้างเกสร
        function addStamen(rose, cx, cy, radius, color) {
            for(let y=0; y<size; y++) {
                for(let x=0; x<size; x++) {
                    const dx = x - cx;
                    const dy = y - cy;
                    if(dx*dx + dy*dy <= radius*radius) {
                        rose[y][x] = color;
                    }
                }
            }
        }
        
        // สร้างใบ
        function addLeaf(rose, cx, cy, width, color) {
            for(let y=0; y<size; y++) {
                for(let x=0; x<size; x++) {
                    const dx = (x - cx) / width;
                    const dy = (y - cy) / (width*1.5);
                    if(dx*dx + dy*dy*dy*dy <= 1) {
                        rose[y][x] = color;
                    }
                }
            }
        }
        
        // สร้างและแสดงดอกกุหลาบ
        const organicRose = createOrganicRose();
        renderRose(organicRose);
        
        function renderRose(roseData) {
            // สุ่มลำดับการแสดงผล
            const pixels = [];
            for(let y=0; y<size; y++) {
                for(let x=0; x<size; x++) {
                    if(roseData[y][x] > 0) {
                        pixels.push({x, y, color: roseData[y][x]});
                    }
                }
            }
            
            // สุ่มลำดับพิกเซล
            shuffleArray(pixels);
            
            // แสดงทีละพิกเซล
            let delay = 0;
            pixels.forEach((pixel, i) => {
                setTimeout(() => {
                    const pixelEl = document.createElement('div');
                    pixelEl.className = 'pixel';
                    pixelEl.style.left = `${pixel.x * pixelSize}px`;
                    pixelEl.style.top = `${pixel.y * pixelSize}px`;
                    pixelEl.style.backgroundColor = colors[pixel.color];
                    pixelEl.style.transform = 'scale(1)';
                    pixelEl.style.opacity = '1';
                    
                    // เพิ่มเอฟเฟกต์แสงเงา
                    if(pixel.color >= 1 && pixel.color <= 6) {
                        pixelEl.style.boxShadow += `, 0 0 10px ${colors[pixel.color]}40`;
                    }
                    
                    container.appendChild(pixelEl);
                }, delay);
                
                delay += 10 + Math.random() * 20;
            });
        }
        
        // ฟังก์ชันสลับอาร์เรย์
        function shuffleArray(array) {
            for(let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
    </script>
</body>
</html>
