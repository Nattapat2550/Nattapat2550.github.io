<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>🌹 Pixel Emoji Render (Base64)</title>
  <style>
    body {
      background: #ffe6f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    canvas {
      image-rendering: pixelated;
      width: 512px;
      height: 512px;
      border: 4px solid #cc6699;
      background: white;
    }
    h1 {
      color: #cc3366;
      font-family: sans-serif;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <h1>🌹 Pixel Emoji Render (Base64)</h1>
  <canvas id="canvas" width="256" height="256"></canvas>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    const img = new Image();
    // base64 ของ emoji 🌹 ขนาด 256x256 px จาก twemoji
    img.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAAAABmJLR0QA/wD/AP+gvaeTAAABFklEQVR42u3RAQEAAAjDMO5fNCAhqBTaDRMBIkSJEiRIkyjwDmAAr2gjEaBHAAD06TSIARAgBgAlB0BIQAFJtAkhAAkD4KIQAF7RBCUQB1CwJEAAYAJQdASSAAUm0CSFECQCfAAkkAA9ukGXAADA+hkhAAUM8JIRAGIwBJEABCUABCTQAyQAEJQAGJRBK7AAUm8CSFECQCQ/AgkAAeLGBaUAECYAhgALpZBJQCAoABNdyxIAJGABCA8ABTUAEFAAEpzAJhAwL9gVbjxQGiYEEHfCacIlvCQQ4JhV46Hy8HgCAAAAAElFTkSuQmCC";

    img.onload = () => {
      const tempCanvas = document.createElement("canvas");
      tempCanvas.width = 256;
      tempCanvas.height = 256;
      const tempCtx = tempCanvas.getContext("2d");
      tempCtx.drawImage(img, 0, 0, 256, 256);

      const imgData = tempCtx.getImageData(0, 0, 256, 256).data;
      const pixels = [];

      for (let y = 0; y < 256; y++) {
        for (let x = 0; x < 256; x++) {
          const i = (y * 256 + x) * 4;
          const r = imgData[i];
          const g = imgData[i + 1];
          const b = imgData[i + 2];
          const a = imgData[i + 3];
          if (a > 10) {
            pixels.push({ x, y, color: `rgba(${r},${g},${b},${a / 255})` });
          }
        }
      }

      let i = 0;
      function draw() {
        if (i < pixels.length) {
          const p = pixels[i];
          ctx.fillStyle = p.color;
          ctx.fillRect(p.x, p.y, 1, 1);
          i++;
          if (i % 300 === 0) setTimeout(draw, 1);
          else draw();
        }
      }
      draw();
    };
  </script>
</body>
</html>
